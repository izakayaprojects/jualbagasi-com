<div class="jumbotron">
	<h1>Jual Bagasi</h1>
	<app-navigation-bar></app-navigation-bar>
</div>

<div class="container" *ngIf="purchaseOrder as po; else loading">
	<!--User-->
	<span class="pointer">
		<img class="profilepic-small mr-3" [src]="po.owner.profilePicUrl === '' 
			? 'assets/icons/default_pp.png' : po.owner.profilePicUrl" />
		<span *ngIf="po.owner.username !== ''; else no_username" class="username"> 
			{{po.owner.username}}
		</span>
		<ng-template #no_username><i>Username tidak ditemukan</i></ng-template>
	</span>
	<hr/>
	<!--Title-->
	<h3>{{ po.title }}</h3>
	
	<!--Banner-->
	<img class="mb-2 img-fluid" src="{{ po.bannerUrl }}"/>

	<div>
		<table class="table table-borderless">
			<tbody>
				<tr>
					<td>
						<span><img src="assets/icons/ic_time.svg" class="mr-3" height="20px" /></span>
						<b>Tanggal buka pesanan</b>
					</td>
					<td>
						{{ po.startDate | date: 'd MMM. y' }} - {{ po.endDate | date: 'd MMM. y' }}
						<span class="badge badge-success ml-2">{{ po.getRemainingTimePrintable() }}</span>
					</td>
				</tr>
				<tr>
					<td>
						<span><img src="assets/icons/ic_luggage.svg" class="mr-3" height="20px" /></span>
						<b>Sisa Kapasitas</b>
					</td>
					<td>{{ po.additional['remaining_capacity'] }} Kg</td>
				</tr>
				<tr>
					<td>
						<span><img src="assets/icons/ic_price.svg" class="mr-3" height="20px" /></span>
						<b>Harga per Kg</b>
					</td>
					<td>{{ po.currency.symbol }} {{ po.feePerKg }}</td>
				</tr>
			</tbody>
		</table>

		<div class="bg-light p-3">
			<h5><span><img src="assets/icons/ic_route.svg" class="mr-3" height="20px"/></span>Rute</h5>
			<div class="d-flex align-items-center flex-wrap">
				<div *ngIf="po.origin.id !== -1">
					<span class="badge badge-info">
						<span class="mr-1 flag-icon 
							flag-icon-{{po.origin.city.countryCode | lowercase}}"></span>
						<span> 
							{{po.origin.city.name}}, {{po.origin.city.country}}
							<br/>
							<span class="small">
								{{po.origin.estimatedItemArrivalDate | date: 'd MMM. y'}}
							</span>
						</span>
    				</span>
    			</div>

    			<div *ngFor="let r of po.routes">
	    			<span>
	    				<img src="assets/icons/ic_arrow_right.svg" height="20px" class="mr-2 ml-2" />
	    			</span>
					<span>
						<span class="badge badge-info">
							<span class="mr-1 flag-icon 
								flag-icon-{{r.city.countryCode | lowercase}}"></span>
							<span>
								{{r.city.name}}, {{r.city.country}}
								<br/>
								<span class="small">
									{{r.estimatedItemArrivalDate | date: 'd MMM. y'}}
								</span>
							</span>
	    				</span>
	    			</span>
    			</div>
			</div>
		</div>

		<div class="mt-3">
			<h5>Tentang PO ini</h5>
			<p>{{ po.description }}</p>
		</div>
	</div>

</div>


<!-- Loading -->
<ng-template #loading>
	<div class="container d-flex align-items-center justify-content-center">
		<div class="spinner-border" role="loading">
			<span class="sr-only">Loading...</span>
		</div>
	</div>
</ng-template>